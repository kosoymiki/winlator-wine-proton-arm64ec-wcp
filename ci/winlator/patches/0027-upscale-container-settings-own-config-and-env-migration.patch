diff --git a/app/src/main/java/com/winlator/cmod/ContainerDetailFragment.java b/app/src/main/java/com/winlator/cmod/ContainerDetailFragment.java
index cbb44f8..23b873d 100644
--- a/app/src/main/java/com/winlator/cmod/ContainerDetailFragment.java
+++ b/app/src/main/java/com/winlator/cmod/ContainerDetailFragment.java
@@ -48,8 +48,8 @@ import com.winlator.cmod.contents.ContentsManager;
 import com.winlator.cmod.core.AppUtils;
 import com.winlator.cmod.core.Callback;
 import com.winlator.cmod.core.DefaultVersion;
-import com.winlator.cmod.core.EnvVars;
-import com.winlator.cmod.core.FileUtils;
+import com.winlator.cmod.core.EnvVars;
+import com.winlator.cmod.core.FileUtils;
 import com.winlator.cmod.core.GPUInformation;
 import com.winlator.cmod.core.KeyValueSet;
 import com.winlator.cmod.core.PreloaderDialog;
@@ -464,7 +464,7 @@ public class ContainerDetailFragment extends Fragment {
         setControllerMapping(view.findViewById(R.id.SThumbstickRight), Container.XrControllerMapping.THUMBSTICK_RIGHT, XKeycode.KEY_RIGHT.ordinal());
 
         createWineConfigurationTab(view);
-        final EnvVarsView envVarsView = createEnvVarsTab(view);
+        final EnvVarsView envVarsView = createEnvVarsTab(view);
         createWinComponentsTab(view, isEditMode() ? container.getWinComponents() : Container.DEFAULT_WINCOMPONENTS);
         createDrivesTab(view);
 
@@ -484,7 +484,7 @@ public class ContainerDetailFragment extends Fragment {
                 // Capture and set container properties based on UI inputs
                 String name = etName.getText().toString();
                 String screenSize = getScreenSize(view);
-                String envVars = envVarsView.getEnvVars();
+                String envVars = stripUpscaleVarsFromEnv(envVarsView.getEnvVars());
                 String graphicsDriver = StringUtils.parseIdentifier(sGraphicsDriver.getSelectedItem());
                 String graphicsDriverConfig = vGraphicsDriverConfig.getTag().toString();
                 HashMap<String, String> config = GraphicsDriverConfigDialog.parseGraphicsDriverConfig(graphicsDriverConfig);
@@ -633,20 +633,36 @@ public class ContainerDetailFragment extends Fragment {
         EditText etMultiplier = view.findViewById(R.id.ETUpscaleSwfgMultiplier);
         EditText etLatency = view.findViewById(R.id.ETUpscaleSwfgLatencyMs);
 
-        String perfPreset = isEditMode() ? container.getExtra(Container.EXTRA_UPSCALE_PERF_PRESET, "auto") : "auto";
-        String swfgPolicy = isEditMode() ? container.getExtra(Container.EXTRA_UPSCALE_SWFG_POLICY, "auto") : "auto";
-        String swfgMode = isEditMode() ? container.getExtra(Container.EXTRA_UPSCALE_SWFG_MODE, "off") : "off";
-        String swfgMultiplier = isEditMode() ? container.getExtra(Container.EXTRA_UPSCALE_SWFG_MULTIPLIER, "2") : "2";
-        String swfgLatency = isEditMode() ? container.getExtra(Container.EXTRA_UPSCALE_SWFG_LATENCY_MS, "8") : "8";
-        String swfgArtifactGuard = isEditMode() ? container.getExtra(Container.EXTRA_UPSCALE_SWFG_ARTIFACT_GUARD, "balanced") : "balanced";
+        UpscaleUiConfig cfg = readUpscaleConfigFromContainerOrLegacyEnv();
 
-        AppUtils.setSpinnerSelectionFromValue(sPerfPreset, perfPreset);
-        AppUtils.setSpinnerSelectionFromValue(sSwfgPolicy, swfgPolicy);
-        AppUtils.setSpinnerSelectionFromValue(sSwfgMode, swfgMode);
-        AppUtils.setSpinnerSelectionFromValue(sArtifactGuard, swfgArtifactGuard);
+        AppUtils.setSpinnerSelectionFromValue(sPerfPreset, cfg.perfPreset);
+        AppUtils.setSpinnerSelectionFromValue(sSwfgPolicy, cfg.swfgPolicy);
+        AppUtils.setSpinnerSelectionFromValue(sSwfgMode, cfg.swfgMode);
+        AppUtils.setSpinnerSelectionFromValue(sArtifactGuard, cfg.swfgArtifactGuard);
 
-        etMultiplier.setText(String.valueOf(clampInt(swfgMultiplier, 1, 4, 2)));
-        etLatency.setText(String.valueOf(clampInt(swfgLatency, 1, 50, 8)));
+        etMultiplier.setText(String.valueOf(clampInt(cfg.swfgMultiplier, 1, 4, 2)));
+        etLatency.setText(String.valueOf(clampInt(cfg.swfgLatencyMs, 1, 50, 8)));
+
+        Runnable syncUiState = () -> {
+            String policy = normalizeChoice(String.valueOf(sSwfgPolicy.getSelectedItem()), "auto");
+            boolean enableSwfgDetails = !"off".equals(policy);
+            sSwfgMode.setEnabled(enableSwfgDetails);
+            sArtifactGuard.setEnabled(enableSwfgDetails);
+            etMultiplier.setEnabled(enableSwfgDetails);
+            etLatency.setEnabled(enableSwfgDetails);
+        };
+        sSwfgPolicy.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
+            @Override
+            public void onItemSelected(AdapterView<?> parent, View view1, int position, long id) {
+                syncUiState.run();
+            }
+
+            @Override
+            public void onNothingSelected(AdapterView<?> parent) {
+                syncUiState.run();
+            }
+        });
+        syncUiState.run();
     }
 
     private UpscaleUiConfig readUpscaleConfigSection(View view) {
@@ -678,6 +694,64 @@ public class ContainerDetailFragment extends Fragment {
         return extraData;
     }
 
+    private UpscaleUiConfig readUpscaleConfigFromContainerOrLegacyEnv() {
+        UpscaleUiConfig cfg = new UpscaleUiConfig();
+        if (isEditMode()) {
+            cfg.perfPreset = container.getExtra(Container.EXTRA_UPSCALE_PERF_PRESET, "");
+            cfg.swfgPolicy = container.getExtra(Container.EXTRA_UPSCALE_SWFG_POLICY, "");
+            cfg.swfgMode = container.getExtra(Container.EXTRA_UPSCALE_SWFG_MODE, "");
+            cfg.swfgMultiplier = container.getExtra(Container.EXTRA_UPSCALE_SWFG_MULTIPLIER, "");
+            cfg.swfgLatencyMs = container.getExtra(Container.EXTRA_UPSCALE_SWFG_LATENCY_MS, "");
+            cfg.swfgArtifactGuard = container.getExtra(Container.EXTRA_UPSCALE_SWFG_ARTIFACT_GUARD, "");
+        }
+
+        boolean missingStructuredUpscale = cfg.perfPreset.isEmpty()
+                && cfg.swfgPolicy.isEmpty()
+                && cfg.swfgMode.isEmpty()
+                && cfg.swfgMultiplier.isEmpty()
+                && cfg.swfgLatencyMs.isEmpty()
+                && cfg.swfgArtifactGuard.isEmpty();
+
+        if (missingStructuredUpscale && isEditMode()) {
+            applyLegacyUpscaleEnvFallback(cfg, new EnvVars(container.getEnvVars()));
+        }
+
+        cfg.perfPreset = normalizeChoice(cfg.perfPreset, "auto");
+        cfg.swfgPolicy = normalizeChoice(cfg.swfgPolicy, "auto");
+        cfg.swfgMode = normalizeChoice(cfg.swfgMode, "off");
+        cfg.swfgMultiplier = String.valueOf(clampInt(cfg.swfgMultiplier, 1, 4, 2));
+        cfg.swfgLatencyMs = String.valueOf(clampInt(cfg.swfgLatencyMs, 1, 50, 8));
+        String guard = normalizeChoice(cfg.swfgArtifactGuard, "balanced");
+        cfg.swfgArtifactGuard = ("safe".equals(guard) || "balanced".equals(guard) || "aggressive".equals(guard)) ? guard : "balanced";
+        return cfg;
+    }
+
+    private static void applyLegacyUpscaleEnvFallback(UpscaleUiConfig cfg, EnvVars envVars) {
+        String perfPreset = normalizeChoice(envVars.get("WINLATOR_PERF_PRESET"), "");
+        if (!perfPreset.isEmpty()) cfg.perfPreset = perfPreset;
+
+        String swfgMode = normalizeChoice(envVars.get("WINLATOR_SWFG_MODE"), "");
+        if (!swfgMode.isEmpty()) cfg.swfgMode = swfgMode;
+
+        String swfgEnabled = normalizeChoice(envVars.get("WINLATOR_SWFG_ENABLED"), envVars.get("WINLATOR_SWFG"));
+        String swfgAuto = normalizeChoice(envVars.get("WINLATOR_SWFG_AUTO"), "");
+        if ("1".equals(swfgAuto) || "true".equals(swfgAuto)) cfg.swfgPolicy = "auto";
+        else if ("1".equals(swfgEnabled) || "true".equals(swfgEnabled)) cfg.swfgPolicy = "on";
+        else if ("0".equals(swfgEnabled) || "false".equals(swfgEnabled)) cfg.swfgPolicy = "off";
+
+        if (envVars.has("WINLATOR_SWFG_MULTIPLIER")) cfg.swfgMultiplier = envVars.get("WINLATOR_SWFG_MULTIPLIER");
+        if (envVars.has("WINLATOR_SWFG_LATENCY_BUDGET_MS")) cfg.swfgLatencyMs = envVars.get("WINLATOR_SWFG_LATENCY_BUDGET_MS");
+        if (envVars.has("WINLATOR_SWFG_ARTIFACT_GUARD")) cfg.swfgArtifactGuard = envVars.get("WINLATOR_SWFG_ARTIFACT_GUARD");
+    }
+
+    private static String stripUpscaleVarsFromEnv(String envString) {
+        EnvVars envVars = new EnvVars(envString);
+        for (String key : UPSCALE_RUNTIME_ENV_KEYS) {
+            envVars.remove(key);
+        }
+        return envVars.toString();
+    }
+
     private void applyUpscaleConfigToContainer(Container container, UpscaleUiConfig cfg) {
         if (container == null || cfg == null) return;
         container.putExtra(Container.EXTRA_UPSCALE_PERF_PRESET, cfg.perfPreset);
@@ -713,6 +787,26 @@ public class ContainerDetailFragment extends Fragment {
         String swfgArtifactGuard = "balanced";
     }
 
+    private static final String[] UPSCALE_RUNTIME_ENV_KEYS = new String[] {
+            "WINLATOR_PERF_PRESET",
+            "WINLATOR_PERF_PRESET_SOURCE",
+            "WINLATOR_SWFG",
+            "WINLATOR_SWFG_AUTO",
+            "WINLATOR_SWFG_ENABLED",
+            "WINLATOR_SWFG_MODE",
+            "WINLATOR_SWFG_MULTIPLIER",
+            "WINLATOR_SWFG_LATENCY_BUDGET_MS",
+            "WINLATOR_SWFG_ARTIFACT_GUARD",
+            "WINLATOR_SWFG_SOURCE",
+            "WINLATOR_SWFG_NORMALIZED",
+            "WINLATOR_SWFG_GUARD_REASON",
+            "WINLATOR_SWFG_OVERRIDE_CONFLICT",
+            "WINLATOR_GRAPHICS_SUITABILITY_TIER",
+            "WINLATOR_GRAPHICS_DRIVER_FAMILY",
+            "WINLATOR_GRAPHICS_SUITABILITY_REASONS",
+            "WINLATOR_WINE_RUNTIME_CLASS"
+    };
+
     private void saveWineRegistryKeys(View view) {
         File userRegFile = new File(container.getRootDir(), ".wine/user.reg");
         try (WineRegistryEditor registryEditor = new WineRegistryEditor(userRegFile)) {
@@ -973,10 +1067,14 @@ public class ContainerDetailFragment extends Fragment {
         // Apply dark mode setting to the existing instance
         envVarsView.setDarkMode(isDarkMode); // New setter method
 
-        envVarsView.setEnvVars(new EnvVars(isEditMode() ? container.getEnvVars() : Container.DEFAULT_ENV_VARS));
-        view.findViewById(R.id.BTAddEnvVar).setOnClickListener((v) -> (new AddEnvVarDialog(context, envVarsView)).show());
-        return envVarsView;
-    }
+        EnvVars baseEnvVars = new EnvVars(isEditMode() ? container.getEnvVars() : Container.DEFAULT_ENV_VARS);
+        for (String key : UPSCALE_RUNTIME_ENV_KEYS) {
+            baseEnvVars.remove(key);
+        }
+        envVarsView.setEnvVars(baseEnvVars);
+        view.findViewById(R.id.BTAddEnvVar).setOnClickListener((v) -> (new AddEnvVarDialog(context, envVarsView)).show());
+        return envVarsView;
+    }
 
     private String getDrives(View view) {
         LinearLayout parent = view.findViewById(R.id.LLDrives);
